<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GRITLab Africa - Publications</title>
  <link rel="icon" type="image/png" href="Assets/images/GritLabAfricaLogo.png">
  <link rel="preconnect" href="https://fonts.googleapis.com/">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  
  <!-- Masterpage CSS -->
  <link rel="stylesheet" href="masterpage.css">

    <!-- Chatbot dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/lucide@0.441.0/dist/umd/lucide.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked@7.0.0/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js"></script>
  
  <!-- Masterpage CSS -->
  <!-- Chatbot CSS -->
  <link rel="stylesheet" href="chatbot.css">
  
  <!-- Custom CSS for Publications Page -->
  <style>
    .hero {
      height: 100vh;
      position: relative;
      overflow: hidden;
      color: #000;
      display: flex;
      align-items: center;
    }

    .hero-slideshow {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    .hero-slide {
      position: absolute;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      opacity: 0;
      transition: opacity 1.5s ease-in-out;
      background-color: rgba(0, 0, 0, 0.3);
      background-blend-mode: overlay;
    }

    .hero-slide.active {
      opacity: 1;
    }

    .hero .container {
      position: relative;
      z-index: 1;
      text-align: center;
    }

    .hero h1 {
      font-size: 3.5rem;
      font-weight: 700;
      margin: 20px 0;
      line-height: 1.2;
      color: darkgoldenrod;
    }

    .custom-message-section {
      background-color: #b8860b;
      padding: 3rem 0;
    }

    .message-content {
      text-align: center;
      max-width: 800px;
      margin: 0 auto;
    }

    .message-content p {
      font-size: 1.2rem;
      line-height: 1.6;
      color: #333;
      margin-bottom: 2rem;
    }

    .logo-display {
      text-align: center;
      margin-top: 2rem;
    }

    .logo-display img {
      max-width: 200px;
      height: auto;
      display: inline-block;
    }

    .split-content-section {
      background-color: #f5f5f5;
      padding: 4rem 0;
    }

    .split-content-wrapper {
      display: flex;
      align-items: center;
      gap: 3rem;
    }

    .image-column,
    .text-column {
      flex: 1;
    }

    .image-column img {
      width: 100%;
      max-width: 400px;
      border-radius: 8px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .text-column h2 {
      font-size: 2.5rem;
      color: #333;
      margin-bottom: 1.5rem;
      font-weight: 700;
    }

    .text-column h3 {
      font-size: 1.5rem;
      color: darkgoldenrod;
      margin-bottom: 2rem;
    }

    .text-column p {
      font-size: 1.1rem;
      line-height: 1.8;
      color: #555;
      margin-bottom: 2rem;
    }

    .trending-section {
      padding: 40px 30px;
      background-color: #e9e9e9;
    }

    .trending-title {
      font-size: 22px;
      font-weight: bold;
      margin-bottom: 20px;
      border-bottom: 2px solid #000;
      display: inline-block;
    }

    .trending-cards {
      display: flex;
      gap: 25px;
      flex-wrap: wrap;
      justify-content: flex-start;
      margin-top: 20px;
    }

    .trend-card {
      background-color: #fff;
      border-radius: 5px;
      width: 280px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      flex-shrink: 0;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .trend-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }

    .trend-card img {
      width: 100%;
      height: 160px;
      object-fit: cover;
    }

    .trend-card h3 {
      font-size: 16px;
      font-weight: 700;
      padding: 10px 15px 5px;
      color: #000;
    }

    .trend-card p {
      font-size: 14px;
      color: #555;
      padding: 0 15px 15px;
    }

    @media (max-width: 991px) {
      .hero h1 {
        font-size: 2.8rem;
      }

      .hero {
        height: auto;
        padding: 120px 0 60px;
      }
    }

    @media (max-width: 768px) {
      .hero h1 {
        font-size: 2rem;
      }

      .split-content-wrapper {
        flex-direction: column;
      }

      .image-column,
      .text-column {
        flex: none;
        width: 100%;
      }

      .trend-card {
        width: 100%;
      }
    }
  </style>
</head>

<body>
  <!-- Header will be inserted by masterpage.js -->
  <gritlab-header></gritlab-header>

  <section class="hero">
    <div class="hero-slideshow">
      <div class="hero-slide active hero-slide-pub-bg"></div>
      <div class="hero-slide hero-slide-pub2-bg"></div>
      <div class="hero-slide hero-slide-pub3-bg"></div>
      <div class="hero-slide hero-slide-pub4-bg"></div>
    </div>
    <div class="container">
      <h1>Publications</h1>
    </div>
  </section>

  <section class="custom-message-section">
    <div class="container">
      <div class="message-content">
        <p>
          Introducing the Kingsman Academic Magazine, a personal publication that serves as a testament 
          to the impactful work carried out by the GRIT Lab Africa. This magazine, functioning akin to 
          a diary or personal journal, showcases the results of GRIT Lab Africa's mission: mentoring 
          and pro-bono skills training for young Africans in technology. While not representing the 
          views of any institution other than GRIT Lab Africa, the Kingsman Academic Magazine aims to 
          share a comprehensive portfolio of skills training and outcomes across various disciplines.
        </p>
      </div>
      <div class="logo-display">
        <img src="Assets/images/KingmanAcademiaLogo.jpg" alt="Kingsman Academic Magazine Logo">
      </div>
    </div>
  </section>

  <section class="split-content-section">
    <div class="container">
      <div class="split-content-wrapper">
        <div class="image-column">
          <img src="Assets/images/ProfMagazine.png" alt="Kingsman Academic Magazine Cover">
        </div>
        <div class="text-column">
          <h2>THE KINGSMAN ACADEMIC</h2>
          <h3>The Kingsman Academic Magazine 2023</h3>
          <p>
            The first edition of the Kingsman Academic Magazine provides a compelling glimpse into the 
            visionary founder's mission to upskill the African youth with tech expertise, character, and a sense of identity.
            Explore the impact of Grit Lab Africa's free mentoring programs, the outcomes of the ETDP-SETA initiative, 
            and the exclusive feature on the Kingsman Academic's role in the launch of the National Artificial Intelligence 
            Institute of South Africa. Dive into applied research, intellectual property development, 
            and the exciting world of tech with #Firepower, featuring the latest devices from servers to drones.
            Uncover 20 tech upskilling programs and join the journey of innovation and empowerment in this captivating debut issue.
          </p>
        </div>
      </div>
    </div>
  </section>

  <section class="trending-section">
    <h2 class="trending-title">TRENDING</h2>
    <div class="trending-cards">
      <div class="trend-card">
        <img src="Assets/images/ZuluPython.webp" alt="Zulu Python">
        <h3>Zulu Python</h3>
        <p>Zulu-Python: Our latest innovation towards efforts indecolonization of knowledge. Imagine...</p>
      </div>
      <div class="trend-card">
        <img src="Assets/images/founder.png" alt="RAA-ED Training">
        <h3>Trainings Given by our Team RAA-ED TRAINING</h3>
        <p>Two members of the Kingsman Academic had the privilege of...</p>
      </div>
      <div class="trend-card">
        <img src="Assets/images/Team8.png" alt="2022 Exhibitions">
        <h3>2022 Exhibitions</h3>
        <p>Johannesburg Business School: Technology Exhibition The Kingsman Academic had two...</p>
      </div>
      <div class="trend-card">
        <img src="Assets/images/FirstUnderGrad.png" alt="Plagi-Warfare">
        <h3>First Undergraduate Students To Co-Author a Journal Article "Plagi-Warfare" (2021)</h3>
        <p>Plagiarism is a significant issue among undergraduate and postgraduate students...</p>
      </div>
    </div>
  </section>

  <div class="chatbot-container hidden" id="chatbotContainer">
    <div class="chat-header">
      <div class="flex items-center space-x-2">
        <div class="avatar">
          <img src="Images/GritLab Logo.png" alt="GRIT Lab Africa Logo">
          <div class="status"></div>
        </div>
        <div>
          <h2 class="title">GRIT Lab Africa Bot <i data-lucide="zap" class="h-3 w-3"></i></h2>
          <p class="subtitle"><i data-lucide="book-open" class="h-2 w-2"></i>Ready to answer about GRIT Lab Africa</p>
        </div>
      </div>
      <span class="badge">Knowledge Powered</span>
    </div>
    <div class="chat-messages" id="chatMessages">
      <div class="message bot">
        <div class="avatar"><i data-lucide="bot" class="h-4 w-4"></i></div>
        <div class="message-content">
          <p>ðŸ‘‹ Hello! Ask me anything about GRIT Lab Africa!</p>
          <div class="meta">
            <span id="currentTime"></span>
            <div class="actions">
              <button class="reaction-like" aria-label="Like this message" title="Like message"><i data-lucide="thumbs-up" class="h-3 w-3"></i></button>
              <button class="reaction-dislike" aria-label="Dislike this message" title="Dislike message"><i data-lucide="thumbs-down" class="h-3 w-3"></i></button>
              <button class="copy-message" aria-label="Copy message" title="Copy message"><i data-lucide="copy" class="h-3 w-3"></i></button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="chat-input">
      <form id="chatForm">
        <div class="input-wrapper">
          <input type="text" id="chatInput" placeholder="Ask about GRIT Lab Africa...">
          <div class="input-actions">
            <button type="button" aria-label="Attach file" title="Attach file"><i data-lucide="paperclip" class="h-4 w-4"></i></button>
            <button type="button" aria-label="Add emoji" title="Add emoji"><i data-lucide="smile" class="h-4 w-4"></i></button>
            <button type="button" aria-label="Voice input" title="Voice input"><i data-lucide="mic" class="h-4 w-4"></i></button>
          </div>
        </div>
        <button type="submit" class="send-button" aria-label="Send message" title="Send message"><i data-lucide="send" class="h-4 w-4"></i></button>
      </form>
      <p class="input-info">Press Enter to send â€¢ Answers sourced from multiple websites</p>
    </div>
  </div>
  <button class="toggle-button" id="toggleButton">
    <img src="Images/Screenshot 2026-01-08 183702.png" alt="Toggle Chatbot">
  </button>

  <!-- Footer will be inserted by masterpage.js -->
  <gritlab-footer></gritlab-footer>

  <!-- Masterpage JS -->
  <script src="masterpage.js"></script>

  <!-- Toggle Button Handler - Direct -->
  <script>
    function toggleChatbot() {
      console.log('Toggle button clicked!');
      const chatbot = document.getElementById('chatbotContainer');
      if (chatbot) {
        chatbot.classList.toggle('hidden');
        console.log('Chatbot is now:', chatbot.classList.contains('hidden') ? 'hidden' : 'visible');
      } else {
        console.error('Chatbot container not found');
      }
    }
    
    // Direct OpenRouter API integration
    async function sendChatMessage() {
      console.log('sendChatMessage called');
      const chatInput = document.getElementById('chatInput');
      const message = chatInput.value.trim();
      
      if (!message) return;
      
      const messagesContainer = document.getElementById('chatMessages');
      
      // Add user message
      const userMessage = document.createElement('div');
      userMessage.className = 'message user';
      userMessage.innerHTML = `
        <div class="message-content">
          <p>${message}</p>
          <div class="meta">
            <span>${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>
          </div>
        </div>
      `;
      messagesContainer.appendChild(userMessage);
      chatInput.value = '';
      
      // Add loading spinner
      const loadingSpinner = document.createElement('div');
      loadingSpinner.className = 'loading-spinner';
      loadingSpinner.innerHTML = `<div class="dot"></div><div class="dot"></div><div class="dot"></div>`;
      messagesContainer.appendChild(loadingSpinner);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
      
      // Call OpenRouter directly
      try {
        const models = [
          'anthropic/claude-opus-4.6',
          'liquid/lfm-2.5-1.2b-thinking:free',
          'upstage/solar-pro-3:free',
          'arcee-ai/trinity-large-preview:free',
          'sourceful/riverflow-v2-pro'
        ];
        
        let answer = null;
        
        for (const model of models) {
          try {
            console.log(`Trying model: ${model}`);
            const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
              method: 'POST',
              headers: {
                'Authorization': 'Bearer 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',
                'Content-Type': 'application/json',
                'HTTP-Referer': 'https://www.gritlabafrica.org',
                'X-Title': 'GRIT Lab Africa Chatbot'
              },
              body: JSON.stringify({
                model,
                messages: [
                  { 
                    role: 'system', 
                    content: `You are a helpful assistant for GRIT Lab Africa (gritlabafrica.org). ONLY provide information from the official gritlabafrica.org website. Do NOT make up information.

KEY FACTS:
**Founder**: Professor Abejide Ade-Ibijola (Full Professor of AI at University of Johannesburg)
**Co-Directors**: Suhail Ally (Software Developer), Ms. Anthea Windvogel (Founder of ElevateHer)
**Founded**: 2016
**Mission**: Train young Africans in programming and tech skills
**Track Record**: 2000+ students trained across 11 African countries with 100% employment rate

**Programs**: Introductory Programming, Data Structures & Algorithms, Web Development, Mobile Apps, Game Development, Data Science, Machine Learning

**Eligibility**: Ages 18-21, African resident, enrolled in accredited African higher institution, STEM or non-STEM with tech interest, 1st/2nd year with 65%+ average

**Graduate Outcomes**: 100% employment rate, undergrads earn R22,000/month, fresh grads earn R37,500/month

**Contact**: Phone: 011 599 1989, Email: info@gritlabafrica.org
**Address**: 69 Kingsway Avenue, JBS Park, Auckland Park, South Africa

If asked about something not listed above, say "I don't have that information. Please contact info@gritlabafrica.org for details." Never fabricate facts.` 
                  },
                  { 
                    role: 'user', 
                    content: message 
                  }
                ],
                max_tokens: 500
              })
            });
            
            if (response.ok) {
              const data = await response.json();
              answer = data.choices[0].message.content;
              console.log(`Success with model: ${model}`);
              break;
            }
          } catch (err) {
            console.error(`Model ${model} failed:`, err.message);
            continue;
          }
        }
        
        if (!answer) {
          answer = 'Sorry, I could not process your request. Please try again later or contact info@gritlabafrica.org';
        }
        
        // Format response with comprehensive markdown support
        let formattedAnswer = answer
          .replace(/^### (.*?)$/gm, '<h3>$1</h3>')            // H3 headings
          .replace(/^## (.*?)$/gm, '<h2>$1</h2>')             // H2 headings
          .replace(/^# (.*?)$/gm, '<h1>$1</h1>')              // H1 headings
          .replace(/^- (.*?)$/gm, '<li>$1</li>')              // Bullet points
          .replace(/(<li>.*<\/li>)/s, '<ul>$1</ul>')         // Wrap bullets in ul
          .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')  // Bold text
          .replace(/\*(.*?)\*/g, '<em>$1</em>')              // Italic text
          .replace(/\n\n/g, '</p><p>')                       // Paragraph breaks
          .replace(/\n/g, '<br>');                           // Line breaks
        
        // Add bot message
        const botMessage = document.createElement('div');
        botMessage.className = 'message bot';
        botMessage.innerHTML = `
          <div class="message-content">
            <p>${formattedAnswer}</p>
            <div class="meta">
              <span>${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>
            </div>
          </div>
        `;
        
        messagesContainer.removeChild(loadingSpinner);
        messagesContainer.appendChild(botMessage);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
      } catch (error) {
        console.error('Error:', error);
        const errorMessage = document.createElement('div');
        errorMessage.className = 'message bot';
        errorMessage.innerHTML = `
          <div class="message-content">
            <p>Error: ${error.message}</p>
          </div>
        `;
        messagesContainer.removeChild(loadingSpinner);
        messagesContainer.appendChild(errorMessage);
      }
    }
    
    // Attach listener immediately
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Attaching toggle button listener...');
      const btn = document.getElementById('toggleButton');
      if (btn) {
        btn.addEventListener('click', toggleChatbot);
        console.log('Toggle button listener attached');
      }
      
      // Attach form handler
      const chatForm = document.getElementById('chatForm');
      if (chatForm) {
        console.log('Attaching form submit handler...');
        chatForm.addEventListener('submit', function(e) {
          console.log('Form submit event caught');
          e.preventDefault();
          e.stopPropagation();
          sendChatMessage();
          return false;
        });
      }
      
      // Attach Enter key handler to input
      const chatInput = document.getElementById('chatInput');
      if (chatInput) {
        console.log('Attaching input Enter key handler...');
        chatInput.addEventListener('keypress', function(e) {
          if (e.key === 'Enter' && !e.shiftKey) {
            console.log('Enter key pressed in input');
            e.preventDefault();
            sendChatMessage();
          }
        });
      }
    });
  </script>

  <!-- Chatbot JS -->
  <script type="module" src="chatbot.js"></script>
 
  <!-- Custom JS for this page -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Hero slideshow
      const heroSlides = document.querySelectorAll('.hero-slide');
      let currentHeroSlide = 0;

      setInterval(() => {
        heroSlides[currentHeroSlide].classList.remove('active');
        currentHeroSlide = (currentHeroSlide + 1) % heroSlides.length;
        heroSlides[currentHeroSlide].classList.add('active');
      }, 5000);
    });
  </script>
</body>
</html>