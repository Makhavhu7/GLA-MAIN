<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>About Us - GRITLab Africa</title>
  <link rel="icon" type="image/png" href="Assets/images/GritLabAfricaLogo.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="masterpage.css">
  <script src="masterpage.js" defer></script>


  <!-- Chatbot dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/lucide@0.441.0/dist/umd/lucide.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@7.0.0/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js"></script>
  
  <!-- Masterpage CSS -->
  <!-- Chatbot CSS -->
  <link rel="stylesheet" href="chatbot.css">
  

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      color: #000;
      background-color: #f5f5f5;
    }

    .container {
      width: 90%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 15px;
    }

    a {
      text-decoration: none;
      color: #000;
    }

    .intro-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      animation: fadeOut 1.5s forwards;
    }

    @keyframes fadeOut {
      0% { opacity: 1; }
      66.67% { opacity: 1; } /* 1 second */
      100% { opacity: 0; display: none; } /* 1.5 seconds */
    }

    .intro-logo {
      max-height: 150px;
      width: auto;
    }

    .hero {
      height: 100vh;
      position: relative;
      overflow: hidden;
      color: #000;
      display: flex;
      align-items: center;
      margin-top: 80px; /* Offset for fixed header */
    }

    .hero-slideshow {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    .hero-slide {
      position: absolute;
      width: 100%;
      height: 100%;
      background-size: 100% 100%;
      background-position: center;
      opacity: 0;
      transition: opacity 1.5s ease-in-out;
      background-color: rgba(0, 0, 0, 0.3);
      background-blend-mode: overlay;
    }

    .hero-slide.active {
      opacity: 1;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: linear-gradient(rgba(226, 221, 221, 0.15), rgba(226, 221, 221, 0.15));
      z-index: 0;
    }

    .hero .container {
      position: relative;
      z-index: 1;
    }

    .hero h1 {
      font-size: 3.5rem;
      font-weight: 700;
      margin: 20px 0;
      line-height: 1.2;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .hero-subtitle {
      font-size: 1.2rem;
      max-width: 600px;
      margin-bottom: 30px;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    }

    .watch-video {
      background-color: rgba(0, 0, 0, 0.5);
      border: 1px solid darkgoldenrod;
      color: darkgoldenrod;
      padding: 10px 18px;
      border-radius: 4px;
      display: inline-flex;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 13px;
      font-weight: 500;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    .watch-video i {
      margin-right: 8px;
      font-size: 11px;
      background: darkgoldenrod;
      color: #000;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .watch-video:hover {
      background-color: darkgoldenrod;
      color: #000;
      box-shadow: 0 5px 15px rgba(184, 134, 11, 0.4);
    }

    .watch-video:hover i {
      background-color: #000;
      color: darkgoldenrod;
      transform: scale(1.1);
    }

    .about-gritlab {
      padding: 3rem 0;
      background: url('Assets/images/Team6.jpg') no-repeat center center/cover;
      background-color: rgba(248, 249, 250, 0.9);
      background-blend-mode: overlay;
    }

    .about-content-card {
      max-width: 800px;
      margin: 0 auto;
      padding: 2.5rem;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      border: 1px solid #eaeaea;
    }

    .about-content {
      line-height: 1.7;
      color: #333;
    }

    .about-content p {
      margin-bottom: 1.5rem;
    }

    .content-divider {
      width: 100%;
      border: none;
      border-top: 2px solid darkgoldenrod;
      margin: 1.5rem 0;
      padding: 0;
    }

    .why-gla, .achievements, .awards, .trending, .gallery, .videos {
      padding: 4rem 0;
      background: linear-gradient(135deg, #f9f6f0 0%, #ffffff 100%);
    }

    .why-gla h2, .achievements h2, .awards h2, .trending h2, .gallery h2, .videos h2 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 2rem;
      color: #000;
      position: relative;
    }

    .why-gla h2::after, .achievements h2::after, .awards h2::after, .trending h2::after, .gallery h2::after, .videos h2::after {
      content: '';
      width: 100px;
      height: 3px;
      background: darkgoldenrod;
      display: block;
      margin: 10px auto;
    }

    .why-gla-grid, .achievements-grid, .trending-grid, .videos-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }

    .why-gla-card, .achievement-card, .trending-card, .video-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 5px;
      padding: 25px;
      text-align: center;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
      transition: transform 0.3s, box-shadow 0.3s;
      position: relative;
      overflow: hidden;
    }

    .why-gla-card:hover, .achievement-card:hover, .trending-card:hover, .video-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(184, 134, 11, 0.2);
    }

    .why-gla-card h3, .achievement-card h3, .trending-card h3, .video-card h3 {
      font-size: 1.2rem;
      margin-bottom: 10px;
      color: #000;
    }

    .why-gla-card p, .achievement-card p, .trending-card p, .video-card p {
      color: #555;
      font-size: 0.85rem;
    }

    .card-icon {
      font-size: 2rem;
      color: darkgoldenrod;
      margin-bottom: 1rem;
    }

    .achievements-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 20px;
      margin-bottom: 2rem;
    }

    .achievement-stat {
      text-align: center;
      background: rgba(255, 255, 255, 0.95);
      padding: 1.5rem;
      border-radius: 5px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
    }

    .achievement-stat h3 {
      font-size: 2rem;
      color: darkgoldenrod;
      margin-bottom: 0.5rem;
    }

    .awards {
      background: url('https://source.unsplash.com/random/1920x1080/?trophy,award') no-repeat center center/cover;
      background-color: rgba(255, 255, 255, 0.9);
      background-blend-mode: overlay;
    }

    .awards ul {
      max-width: 800px;
      margin: 0 auto;
      list-style: none;
      padding-left: 0;
    }

    .awards ul li {
      margin-bottom: 0.75rem;
      padding-left: 2rem;
      position: relative;
      color: #333;
    }

    .awards ul li::before {
      content: '\f091';
      font-family: 'Font Awesome 6 Free';
      font-weight: 900;
      color: darkgoldenrod;
      position: absolute;
      left: 0;
      top: 2px;
    }

    .trending-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }

    .trending-card a {
      color: darkgoldenrod;
      font-size: 0.85rem;
      font-weight: 500;
    }

    .trending-card a:hover {
      color: #b8860b;
    }

    .trending-card img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border-radius: 5px;
      margin-bottom: 1rem;
    }

    .videos-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }

    .video-card iframe {
      width: 100%;
      height: 150px;
      border-radius: 5px;
      margin-bottom: 1rem;
      border: none;
    }

    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }

    .gallery-item {
      position: relative;
      overflow: hidden;
      border-radius: 5px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .gallery-item:hover {
      transform: scale(1.05);
      box-shadow: 0 10px 30px rgba(184, 134, 11, 0.2);
    }

    .gallery-item img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      display: block;
    }

    .gallery-item .overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .gallery-item:hover .overlay {
      opacity: 1;
    }

    .gallery-item .overlay span {
      color: #fff;
      font-size: 1rem;
      font-weight: 500;
      text-align: center;
    }

    .video-backdrop {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.85);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .video-container {
      width: 80%;
      max-width: 900px;
      background-color: #000;
      border-radius: 8px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      transform: scale(0.9);
      transition: transform 0.3s ease;
    }

    .video-close-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      background: none;
      border: none;
      color: #fff;
      font-size: 24px;
      cursor: pointer;
      z-index: 1001;
    }

    .video-iframe-container {
      padding: 56.25% 0 0 0;
      position: relative;
      border-radius: 8px;
      overflow: hidden;
    }

    .video-iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #111;
    }

    @media (max-width: 991px) {
      .hero h1 { font-size: 2.8rem; }
      .hero { height: auto; padding: 120px 0 60px; }
      .hero-subtitle { margin-bottom: 40px; }
    }

    @media (max-width: 768px) {
      .hero h1 { font-size: 2rem; }
      .hero-subtitle { font-size: 1rem; }
      .gallery-item img { height: 150px; }
      .video-card iframe { height: 150px; }
    }
  </style>
  <style>
  /* Achievements Section Styles */
  .achievements {
    padding: 5rem 0;
    background-color: #f8f9fa;
    text-align: center;
  }
  
  .achievements h2 {
    font-size: 2.5rem;
    margin-bottom: 3rem;
    color: #333;
  }
  
  .achievements-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
    margin-bottom: 4rem;
  }
  
  .achievement-stat {
    background: white;
    padding: 2rem 1rem;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease;
  }
  
  .achievement-stat:hover {
    transform: translateY(-5px);
  }
  
  .card-icon {
    font-size: 2.5rem;
    color: darkgoldenrod;
    margin-bottom: 1rem;
  }
  
  .achievement-stat h3 {
    font-size: 1.8rem;
    margin-bottom: 0.5rem;
    color: #333;
  }
  
  .achievement-stat p {
    color: #666;
    font-size: 1rem;
    line-height: 1.5;
  }
  
  .achievements-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
  }
  
  .achievement-card {
    background: white;
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    text-align: left;
    transition: transform 0.3s ease;
  }
  
  .achievement-card:hover {
    transform: translateY(-5px);
  }
  
  .achievement-card h3 {
    font-size: 1.4rem;
    margin: 1rem 0;
    color: #333;
  }
  
  .achievement-card p {
    color: #666;
    font-size: 1rem;
    line-height: 1.6;
  }
  
  /* Responsive Adjustments */
  @media (max-width: 768px) {
    .achievements-stats {
      grid-template-columns: repeat(2, 1fr);
    }
    
    .achievements-grid {
      grid-template-columns: 1fr;
    }
    
    .achievement-stat {
      padding: 1.5rem 1rem;
    }
    
    .achievement-stat h3 {
      font-size: 1.5rem;
    }
  }
  
  @media (max-width: 480px) {
    .achievements-stats {
      grid-template-columns: 1fr;
    }
    
    .achievements h2 {
      font-size: 2rem;
    }
  }
</style>
</head>
<body>
  <!-- Intro Overlay -->
  <div class="intro-overlay">
    <img src="Assets/images/GritLabAfricaLogo.png" alt="GritLab Africa Logo" class="intro-logo">
  </div>

  <gritlab-header></gritlab-header>

  <!-- Hero Section -->
  <section class="hero" id="home">
    <div class="hero-slideshow">
      <div class="hero-slide active" style="background-image: url('Assets/images/Team3.webp');"></div>
      <div class="hero-slide" style="background-image: url('Assets/images/Team7.jpg');"></div>
      <div class="hero-slide" style="background-image: url('Assets/images/Team.webp');"></div>
    </div>
    <div class="container">
      <h1>Empowering Africa's Future</h1>
      <center><p class="hero-subtitle">Training young Africans in grit and programming for the Fourth Industrial Revolution</p></center>
      <button class="watch-video"><i class="fas fa-play"></i> Watch Video</button>
    </div>
  </section>

  <!-- About Us Section -->
  <section class="about-gritlab" id="about">
    <div class="container">
      <div class="about-content-card">
        <h2 class="text-center text-2xl font-bold mb-6">About Us</h2>
        <div class="about-content">
          <p>GRIT Lab Africa was founded in 2016 by Professor Ade-Ibijola as a social project for training young Africans in grit and programming. Abejide mentors 116 young people across 38 higher institutions of learning in 11 African countries. The Kingsman Academic is an identity that symbolizes a person who is able to transcend the divisions in society, continuously acquire future-fit skills, solve for society using technology, and help others. GRIT Lab Africa is a non-profit program for training such young people across Africa.</p>
          <hr class="content-divider">
          <p class="font-semibold">Professor Abejide Ade-Ibijola (PhD, Wits)</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Why GLA Section -->
  <section class="why-gla" id="why-gla">
    <div class="container">
      <h2>Why GLA?</h2>
      <div class="why-gla-grid">
        <div class="why-gla-card">
          <i class="fas fa-chalkboard-teacher card-icon"></i>
          <h3>Not a Conventional Classroom</h3>
          <p>Focus on skills needed by the industry in the Fourth Industrial Revolution.</p>
        </div>
        <div class="why-gla-card">
          <i class="fas fa-code card-icon"></i>
          <h3>Hands-on 4IR Skills Training</h3>
          <p>Introductory programming, data structures, algorithms, web, mobile, game development, data science, and machine learning.</p>
        </div>
        <div class="why-gla-card">
          <i class="fas fa-users card-icon"></i>
          <h3>Iron Sharpens Iron</h3>
          <p>Mentees meet and interact with the brightest minds.</p>
        </div>
        <div class="why-gla-card">
          <i class="fas fa-crown card-icon"></i>
          <h3>Africa Royalty</h3>
          <p>United and confident young Africans co-solving with others.</p>
        </div>
        <div class="why-gla-card">
          <i class="fas fa-network-wired card-icon"></i>
          <h3>Exposure and Access</h3>
          <p>To the founder's network in industry and academia.</p>
        </div>
        <div class="why-gla-card">
          <i class="fas fa-certificate card-icon"></i>
          <h3>Validation</h3>
          <p>Certification of expertise by the founder, a professor and subject matter expert.</p>
        </div>
        <div class="why-gla-card">
          <i class="fas fa-heart card-icon"></i>
          <h3>Family</h3>
          <p>Be part of a family across Africa.</p>
        </div>
        <div class="why-gla-card">
          <i class="fas fa-briefcase card-icon"></i>
          <h3>Employment</h3>
          <p>Job creation and start-up incubation.</p>
        </div>
        <div class="why-gla-card">
          <i class="fas fa-star card-icon"></i>
          <h3>Worthiness</h3>
          <p>Learning, character, GRIT, with consciousness for social impact.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Achievements Section -->
  <section class="achievements" id="achievements">
  <div class="container">
    <h2>What Has GLA Done?</h2>
    <div class="achievements-stats">
      <div class="achievement-stat">
        <i class="fas fa-user-graduate card-icon"></i>
        <h3>2000+</h3>
        <p>Students trained since 2016</p>
      </div>
      <div class="achievement-stat">
        <i class="fas fa-globe-africa card-icon"></i>
        <h3>593</h3>
        <p>Grit-ers across 11 countries</p>
      </div>
      <div class="achievement-stat">
        <i class="fas fa-money-bill-wave card-icon"></i>
        <h3>+R 28 million</h3>
        <p>Worth of free training offered in 2023</p>
      </div>
      <div class="achievement-stat">
        <i class="fas fa-briefcase card-icon"></i>
        <h3>100%</h3>
        <p>Graduate Employment Rate</p>
      </div>
      <div class="achievement-stat">
        <i class="fas fa-map-marked-alt card-icon"></i>
        <h3>25 countries</h3>
        <p>Historical Reach</p>
      </div>
      <div class="achievement-stat">
        <i class="fas fa-university card-icon"></i>
        <h3>38 institutions</h3>
        <p>Higher Institutional Reach</p>
      </div>
    </div>
    <div class="achievements-grid">
      <div class="achievement-card">
        <i class="fas fa-brain card-icon"></i>
        <h3>Smart & Hardworking Youth</h3>
        <p>Forged the smartest, most hardworking, and persevering young people.</p>
      </div>
      <div class="achievement-card">
        <i class="fas fa-handshake card-icon"></i>
        <h3>Reduced Unemployment</h3>
        <p>Equipped participants with skills for mobile/web pages, video games, etc., with a 100% employment rate.</p>
      </div>
      <div class="achievement-card">
        <i class="fas fa-money-check-alt card-icon"></i>
        <h3>Competitive Salaries</h3>
        <p>Paid up to R22,000/month for undergraduates and R37,500/month for fresh graduates.</p>
      </div>
      <div class="achievement-card">
        <i class="fas fa-gavel card-icon"></i>
        <h3>Discipline</h3>
        <p>Brought back 'old-school' discipline in young Africans.</p>
      </div>
      <div class="achievement-card">
        <i class="fas fa-users card-icon"></i>
        <h3>United Community</h3>
        <p>Created a united community of Africans from diverse backgrounds, races, and cultures.</p>
      </div>
    </div>
  </div>
</section>


  <!-- Videos Section -->
  <section class="videos" id="videos">
    <div class="container">
      <h2>Our Videos</h2>
      <div class="videos-grid">
        <div class="video-card">
          <iframe src="https://www.youtube.com/embed/r2RbYqolNTk?controls=1&modestbranding=1&rel=0" title="GRITLab Video 1" allowfullscreen></iframe>
          <h3>Exhibition and Guard of Honour at the 2023 JBS GRIT Lab Graduation Ceremony</h3>
          
        </div>
        <div class="video-card">
          <iframe src="https://www.youtube.com/embed/rLeIFHlgXW8?controls=1&modestbranding=1&rel=0" title="2023 Chapter Zero Highlights" allowfullscreen></iframe>
          <h3>2023 Chapter Zero Highlights</h3>
          
        </div>
        <div class="video-card">
          <iframe src="https://www.youtube.com/embed/sejj2cNKOXM?controls=1&modestbranding=1&rel=0" title="GRIT Lab Africa Launch Testimonies" allowfullscreen></iframe>
          <h3>GRIT Lab Africa Launch Testimonies</h3>
          
        </div>
      </div>
    </div>
  </section>

  <!-- Gallery Section -->
  <section class="gallery" id="gallery">
    <div class="container">
      <h2>Our Journey in Pictures</h2>
      <div class="gallery-grid">
        <div class="gallery-item">
          <img src="Assets/images/2023Griters.jpg" alt="Griters of 2023">
          <div class="overlay"><span>Griters of 2023</span></div>
        </div>
        <div class="gallery-item">
          <img src="Assets/images/Team7.jpg" alt="Team Collaboration">
          <div class="overlay"><span>Team Collaboration</span></div>
        </div>
        <div class="gallery-item">
          <img src="Assets/images/Consulting.jpg" alt="Consulting 2025">
          <div class="overlay"><span>Consulting 2025</span></div>
        </div>
        <div class="gallery-item">
          <img src="Assets/images/Chinanews.jpg" alt="Featured on the Chinese National News">
          <div class="overlay"><span>Featured on the Chinese National News</span></div>
        </div>
      </div>
    </div>
  </section>

    <!-- Chatbot HTML -->
  <div class="chatbot-container hidden" id="chatbotContainer">
    <div class="chat-header">
      <div class="flex items-center space-x-2">
        <div class="avatar">
          <img src="Images/GritLab Logo.png" alt="GRIT Lab Africa Logo">
          <div class="status"></div>
        </div>
        <div>
          <h2 class="title">GRIT Lab Africa Bot <i data-lucide="zap" class="h-3 w-3"></i></h2>
          <p class="subtitle"><i data-lucide="book-open" class="h-2 w-2"></i>Ready to answer about GRIT Lab Africa</p>
        </div>
      </div>
      <span class="badge">Knowledge Powered</span>
    </div>
    <div class="chat-messages" id="chatMessages">
      <div class="message bot">
        <div class="avatar"><i data-lucide="bot" class="h-4 w-4"></i></div>
        <div class="message-content">
          <p>ðŸ‘‹ Hello! Ask me anything about GRIT Lab Africa!</p>
          <div class="meta">
            <span id="currentTime"></span>
            <div class="actions">
              <button class="reaction-like" aria-label="Like this message" title="Like"><i data-lucide="thumbs-up" class="h-3 w-3"></i></button>
              <button class="reaction-dislike" aria-label="Dislike this message" title="Dislike"><i data-lucide="thumbs-down" class="h-3 w-3"></i></button>
              <button class="copy-message" aria-label="Copy message" title="Copy"><i data-lucide="copy" class="h-3 w-3"></i></button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="quick-prompts" id="quickPrompts">
      <button data-prompt="What is GRIT Lab Africa?">What is GRIT Lab Africa?</button>
      <button data-prompt="Who founded GRIT Lab Africa?">Who founded it?</button>
      <button data-prompt="What programs does GRIT Lab Africa offer?">Programs</button>
      <button data-prompt="When was GRIT Lab Africa founded?">Founded</button>
      <button data-prompt="What are GRIT Lab Africaâ€™s awards?">Awards</button>
    </div>
    <div class="chat-input">
      <form id="chatForm">
        <div class="input-wrapper">
          <input type="text" id="chatInput" placeholder="Ask about GRIT Lab Africa...">
          <div class="input-actions">
            <button type="button" aria-label="Attach file" title="Attach"><i data-lucide="paperclip" class="h-4 w-4"></i></button>
            <button type="button" aria-label="Add emoji" title="Emoji"><i data-lucide="smile" class="h-4 w-4"></i></button>
            <button type="button" aria-label="Voice input" title="Voice"><i data-lucide="mic" class="h-4 w-4"></i></button>
          </div>
        </div>
        <button type="submit" class="send-button" aria-label="Send message" title="Send"><i data-lucide="send" class="h-4 w-4"></i></button>
      </form>
      <p class="input-info">Press Enter to send â€¢ Answers sourced from multiple websites</p>
    </div>
  </div>
  <button class="toggle-button" id="toggleButton">
    <img src="Images/Screenshot 2026-01-08 183702.png" alt="Toggle Chatbot">
  </button>

  <gritlab-footer></gritlab-footer>

  <!-- Masterpage JS -->
  <script src="masterpage.js"></script>

  <!-- Toggle Button Handler - Direct -->
  <script>
    function toggleChatbot() {
      console.log('Toggle button clicked!');
      const chatbot = document.getElementById('chatbotContainer');
      if (chatbot) {
        chatbot.classList.toggle('hidden');
        console.log('Chatbot is now:', chatbot.classList.contains('hidden') ? 'hidden' : 'visible');
      } else {
        console.error('Chatbot container not found');
      }
    }
    
    // Direct OpenRouter API integration
    async function sendChatMessage() {
      console.log('sendChatMessage called');
      const chatInput = document.getElementById('chatInput');
      const message = chatInput.value.trim();
      
      if (!message) return;
      
      const messagesContainer = document.getElementById('chatMessages');
      
      // Add user message
      const userMessage = document.createElement('div');
      userMessage.className = 'message user';
      userMessage.innerHTML = `
        <div class="message-content">
          <p>${message}</p>
          <div class="meta">
            <span>${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>
          </div>
        </div>
      `;
      messagesContainer.appendChild(userMessage);
      chatInput.value = '';
      
      // Add loading spinner
      const loadingSpinner = document.createElement('div');
      loadingSpinner.className = 'loading-spinner';
      loadingSpinner.innerHTML = `<div class="dot"></div><div class="dot"></div><div class="dot"></div>`;
      messagesContainer.appendChild(loadingSpinner);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
      
      // Call OpenRouter directly
      try {
        const models = [
          'anthropic/claude-opus-4.6',
          'liquid/lfm-2.5-1.2b-thinking:free',
          'upstage/solar-pro-3:free',
          'arcee-ai/trinity-large-preview:free',
          'sourceful/riverflow-v2-pro'
        ];
        
        let answer = null;
        
        for (const model of models) {
          try {
            console.log(`Trying model: ${model}`);
            const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
              method: 'POST',
              headers: {
                'Authorization': 'Bearer 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',
                'Content-Type': 'application/json',
                'HTTP-Referer': 'https://www.gritlabafrica.org',
                'X-Title': 'GRIT Lab Africa Chatbot'
              },
              body: JSON.stringify({
                model,
                messages: [
                  { 
                    role: 'system', 
                    content: `You are a helpful assistant for GRIT Lab Africa (gritlabafrica.org). ONLY provide information from the official gritlabafrica.org website. Do NOT make up information.

KEY FACTS:
**Founder**: Professor Abejide Ade-Ibijola (Full Professor of AI at University of Johannesburg)
**Co-Directors**: Suhail Ally (Software Developer), Ms. Anthea Windvogel (Founder of ElevateHer)
**Founded**: 2016
**Mission**: Train young Africans in programming and tech skills
**Track Record**: 2000+ students trained across 11 African countries with 100% employment rate

**Programs**: Introductory Programming, Data Structures & Algorithms, Web Development, Mobile Apps, Game Development, Data Science, Machine Learning

**Eligibility**: Ages 18-21, African resident, enrolled in accredited African higher institution, STEM or non-STEM with tech interest, 1st/2nd year with 65%+ average

**Graduate Outcomes**: 100% employment rate, undergrads earn R22,000/month, fresh grads earn R37,500/month

**Contact**: Phone: 011 599 1989, Email: info@gritlabafrica.org
**Address**: 69 Kingsway Avenue, JBS Park, Auckland Park, South Africa

If asked about something not listed above, say "I don't have that information. Please contact info@gritlabafrica.org for details." Never fabricate facts.` 
                  },
                  { 
                    role: 'user', 
                    content: message 
                  }
                ],
                max_tokens: 500
              })
            });
            
            if (response.ok) {
              const data = await response.json();
              answer = data.choices[0].message.content;
              console.log(`Success with model: ${model}`);
              break;
            }
          } catch (err) {
            console.error(`Model ${model} failed:`, err.message);
            continue;
          }
        }
        
        if (!answer) {
          answer = 'Sorry, I could not process your request. Please try again later or contact info@gritlabafrica.org';
        }
        
        // Format response with comprehensive markdown support
        let formattedAnswer = answer
          .replace(/^### (.*?)$/gm, '<h3>$1</h3>')            // H3 headings
          .replace(/^## (.*?)$/gm, '<h2>$1</h2>')             // H2 headings
          .replace(/^# (.*?)$/gm, '<h1>$1</h1>')              // H1 headings
          .replace(/^- (.*?)$/gm, '<li>$1</li>')              // Bullet points
          .replace(/(<li>.*<\/li>)/s, '<ul>$1</ul>')         // Wrap bullets in ul
          .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')  // Bold text
          .replace(/\*(.*?)\*/g, '<em>$1</em>')              // Italic text
          .replace(/\n\n/g, '</p><p>')                       // Paragraph breaks
          .replace(/\n/g, '<br>');                           // Line breaks
        
        // Add bot message
        const botMessage = document.createElement('div');
        botMessage.className = 'message bot';
        botMessage.innerHTML = `
          <div class="message-content">
            <p>${formattedAnswer}</p>
            <div class="meta">
              <span>${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>
            </div>
          </div>
        `;
        
        messagesContainer.removeChild(loadingSpinner);
        messagesContainer.appendChild(botMessage);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
      } catch (error) {
        console.error('Error:', error);
        const errorMessage = document.createElement('div');
        errorMessage.className = 'message bot';
        errorMessage.innerHTML = `
          <div class="message-content">
            <p>Error: ${error.message}</p>
          </div>
        `;
        messagesContainer.removeChild(loadingSpinner);
        messagesContainer.appendChild(errorMessage);
      }
    }
    
    // Attach listener immediately
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Attaching toggle button listener...');
      const btn = document.getElementById('toggleButton');
      if (btn) {
        btn.addEventListener('click', toggleChatbot);
        console.log('Toggle button listener attached');
      }
      
      // Attach form handler
      const chatForm = document.getElementById('chatForm');
      if (chatForm) {
        console.log('Attaching form submit handler...');
        chatForm.addEventListener('submit', function(e) {
          console.log('Form submit event caught');
          e.preventDefault();
          e.stopPropagation();
          sendChatMessage();
          return false;
        });
      }
      
      // Attach Enter key handler to input
      const chatInput = document.getElementById('chatInput');
      if (chatInput) {
        console.log('Attaching input Enter key handler...');
        chatInput.addEventListener('keypress', function(e) {
          if (e.key === 'Enter' && !e.shiftKey) {
            console.log('Enter key pressed in input');
            e.preventDefault();
            sendChatMessage();
          }
        });
      }
    });
  </script>

  <!-- Chatbot JS -->
  <script type="module" src="chatbot.js"></script>

  <!-- Old Firebase Code (disabled) -->
  <script style="display:none;">
    const firebaseConfig = {
      apiKey: "AIzaSyArCNt1aMvyOpf4WXdkiOk8-7JjkklsDPU",
      authDomain: "grit-bot.firebaseapp.com",
      projectId: "grit-bot",
      storageBucket: "grit-bot.firebasestorage.app",
      messagingSenderId: "606404992669",
      appId: "1:606404992669:web:f7ada90b24b6aa42be3e74",
      measurementId: "G-NE6XLTM3CK"
    };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const auth = getAuth(app);
  const analytics = getAnalytics(app);

  // Initialize anonymous authentication
  let userId = null;
  let authInitialized = false;
  signInAnonymously(auth)
    .then(userCredential => {
      userId = userCredential.user.uid;
      authInitialized = true;
      console.log('Anonymous auth successful, userId:', userId);
      loadConversationHistory();
    })
    .catch(error => {
      console.error('Auth error:', error.code, error.message);
      alert(`Failed to initialize chat: ${error.message}. Please refresh or contact support.`);
    });

  lucide.createIcons();

  function updateTime() {
    document.getElementById('currentTime').textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
  }
  updateTime();
  setInterval(updateTime, 60000);

  function toggleChatbot() {
    console.log('Toggling chatbot');
    const chatbot = document.getElementById('chatbotContainer');
    const toggleButton = document.getElementById('toggleButton');
    if (chatbot.classList.contains('hidden')) {
      chatbot.classList.remove('hidden');
      toggleButton.classList.remove('visible');
    } else {
      chatbot.classList.add('hidden');
      toggleButton.classList.add('visible');
    }
  }

  let conversationHistory = [];

  async function checkRateLimit() {
    console.log('Checking rate limit for userId:', userId);
    if (!userId || !authInitialized) {
      console.error('Authentication not ready. userId:', userId, 'authInitialized:', authInitialized);
      alert('Authentication not ready. Please try again.');
      return false;
    }
    const rateLimitRef = doc(db, 'rateLimits', userId);
    const docSnap = await getDoc(rateLimitRef);
    const now = Date.now();
    const windowMs = 60 * 1000; // 1 minute
    const maxRequests = 10;

    if (!docSnap.exists()) {
      console.log('No rate limit doc found, creating new one');
      await setDoc(rateLimitRef, { count: 1, timestamp: now });
      return true;
    }

    const data = docSnap.data();
    console.log('Rate limit data:', data);
    if (now - data.timestamp > windowMs) {
      console.log('Resetting rate limit');
      await setDoc(rateLimitRef, { count: 1, timestamp: now });
      return true;
    }

    if (data.count >= maxRequests) {
      console.log('Rate limit exceeded');
      return false;
    }

    console.log('Incrementing rate limit count');
    await setDoc(rateLimitRef, { count: data.count + 1, timestamp: now });
    return true;
  }

  async function loadConversationHistory() {
    if (!userId || !authInitialized) {
      console.error('Cannot load conversation history: userId or auth not initialized');
      return;
    }
    console.log('Loading conversation history for userId:', userId);
    const historyQuery = query(
      collection(db, 'conversations', userId, 'history'),
      orderBy('timestamp', 'desc'),
      limit(5)
    );
    try {
      const snapshot = await getDocs(historyQuery);
      conversationHistory = snapshot.docs.map(doc => doc.data());
      console.log('Conversation history loaded:', conversationHistory);
      updateQuickPrompts();
    } catch (error) {
      console.error('Error loading conversation history:', error.message);
    }
  }

  async function saveConversation(queryText, response) {
    if (!userId || !authInitialized) {
      console.error('Cannot save conversation: userId or auth not initialized');
      return;
    }
    console.log('Saving conversation:', { queryText, response });
    try {
      await addDoc(collection(db, 'conversations', userId, 'history'), {
        query: queryText,
        response,
        timestamp: new Date()
      });
      conversationHistory.push({ query: queryText, response });
      conversationHistory = conversationHistory.slice(-5);
      updateQuickPrompts();
    } catch (error) {
      console.error('Error saving conversation:', error.message);
    }
  }

  async function checkCache(queryText) {
    console.log('Checking cache for query:', queryText);
    const normalizedQuery = queryText.toLowerCase().trim();
    const cacheQuery = query(collection(db, 'cache'), where('query', '==', normalizedQuery));
    try {
      const snapshot = await getDocs(cacheQuery);
      if (!snapshot.empty) {
        const doc = snapshot.docs[0].data();
        const cacheTime = doc.timestamp.toDate().getTime();
        const now = Date.now();
        const ttlMs = 24 * 60 * 60 * 1000; // 24 hours
        if (now - cacheTime < ttlMs) {
          console.log('Cache hit:', doc);
          return { content: doc.response, source: doc.source, scores: doc.scores || [] };
        } else {
          console.log('Cache expired, deleting');
          await snapshot.docs[0].ref.delete();
        }
      } else {
        console.log('No cache hit for query:', normalizedQuery);
      }
    } catch (error) {
      console.error('Error checking cache:', error.message);
    }
    return null;
  }

  async function findClosestCachedQuery(queryText) {
    console.log('Finding closest cached query for:', queryText);
    const normalizedQuery = queryText.toLowerCase().trim();
    const tokens = normalizedQuery.split(/\s+/);
    try {
      const cacheQuery = query(collection(db, 'cache'), orderBy('timestamp', 'desc'), limit(50));
      const snapshot = await getDocs(cacheQuery);
      if (snapshot.empty) {
        console.log('No cached queries found');
        return null;
      }

      let bestMatch = null;
      let highestScore = 0;

      snapshot.docs.forEach(doc => {
        const cachedQuery = doc.data().query.toLowerCase().trim();
        const cachedTokens = cachedQuery.split(/\s+/);
        const intersection = tokens.filter(token => cachedTokens.includes(token));
        const score = intersection.length / Math.max(tokens.length, cachedTokens.length, 1);

        if (score > highestScore && score >= 0.4) { // Lowered threshold for broader matching
          highestScore = score;
          bestMatch = {
            content: doc.data().response,
            source: doc.data().source,
            scores: doc.data().scores || [],
            query: cachedQuery
          };
        }
      });

      if (bestMatch) {
        console.log('Closest cached query found:', bestMatch.query, 'Score:', highestScore);
        return bestMatch;
      } else {
        console.log('No sufficiently similar cached query found');
        return null;
      }
    } catch (error) {
      console.error('Error finding closest cached query:', error.message);
      return null;
    }
  }

  async function saveToCache(queryText, response, source, scores) {
    console.log('Saving to cache:', { queryText, response, source, scores });
    try {
      await addDoc(collection(db, 'cache'), {
        query: queryText.toLowerCase().trim(),
        response,
        source,
        scores,
        timestamp: new Date()
      });
      console.log('Cache saved successfully');
    } catch (error) {
      console.error('Error saving to cache:', error.message);
    }
  }

  // Hardcoded fallback responses for common queries
  const fallbackResponses = {
    location: {
      keywords: ['location', 'address', 'where'],
      response: 'Grit Lab Africa is located at 69 Kingsway Avenue, JBS Park, Auckland Park, South Africa.',
      source: 'GRIT Lab Africa Website Footer'
    },
    contact: {
      keywords: ['contact', 'phone', 'email'],
      response: 'You can contact GRIT Lab Africa at Phone: 011 599 1989, Email: info@gritlabafrica.org.',
      source: 'GRIT Lab Africa Website Footer'
    },
    programs: {
      keywords: ['programs', 'bootcamp', 'courses', 'training'],
      response: 'GRIT Lab Africa offers free training in computer programming skills, including Introductory Programming, Data Structures and Algorithms, Web Development, Mobile App Development, Game Development, Data Science, and Machine Learning, along with mentoring in mindset, discipline, and GRIT.',
      source: 'GRIT Lab Africa Website (https://www.gritlabafrica.org/about)'
    },
    eligibility: {
      keywords: ['eligibility', 'apply', 'join', 'requirements', 'win'],
      response: 'To join GRIT Lab Africa, applicants must be 18-21 years old (or provide motivation if younger/older), African residents, registered in an accredited African higher institution, studying a STEM-related field (or non-STEM with tech interest), in their first or second year with a 65%+ average, and disciplined. No prior programming knowledge is required.',
      source: 'GRIT Lab Africa Website (https://www.gritlabafrica.org/apply)'
    },
    founder: {
      keywords: ['founder', 'founded', 'who started'],
      response: 'GRIT Lab Africa was founded in 2016 by Professor Abejide Ade-Ibijola.',
      source: 'GRIT Lab Africa Website (https://www.gritlabafrica.org/)'
    },
    benefits: {
      keywords: ['benefits', 'skills', 'what do i get'],
      response: 'Participants in GRIT Lab Africa gain skills in programming (e.g., Web Development, Data Science), mindset training, discipline, and GRIT. Graduates have a 100% employment rate in South Africaâ€™s tech industry and opportunities to start tech ventures.',
      source: 'GRIT Lab Africa Website (https://www.gritlabafrica.org/about)'
    }
  };

  // Keyword mapping for query normalization (similar to server-side synonymMap)
  const keywordMap = {
    'bootcamp': 'programs',
    'bootcapm': 'programs',
    'course': 'programs',
    'training': 'programs',
    'win': 'eligibility',
    'join': 'eligibility',
    'apply': 'eligibility',
    'requirements': 'eligibility',
    'where': 'location',
    'address': 'location',
    'phone': 'contact',
    'email': 'contact',
    'skill': 'benefits',
    'benefits': 'benefits',
    'founded': 'founder',
    'starter': 'founder',
    'who started': 'founder'
  };

  function normalizeQuery(queryText) {
    let normalized = queryText.toLowerCase().trim();
    Object.keys(keywordMap).forEach(word => {
      normalized = normalized.replace(new RegExp(`\\b${word}\\b`, 'gi'), keywordMap[word]);
    });
    return normalized;
  }

  function cleanBotAnswer(rawAnswer) {
    if (!rawAnswer) {
      return '';
    }
    let text = String(rawAnswer);
    text = text.replace(/<p>\s*based\s+solely[\s\S]*?<\/p>/gi, '');
    text = text.replace(/based\s+solely\s+on\s+the\s+provided\s+context\s*:?\s*/gi, '');
    text = text.replace(/<p>\s*source\s*:\s*[^<]*<\/p>/gi, '');
    text = text.replace(/\*\*\s*source\s*\*\*\s*:?\s*.*$/gmi, '');
    text = text.replace(/^\s*source\s*:\s*.*$/gmi, '');
    text = text.replace(/\n{3,}/g, '\n\n').trim();
    return text;
  }

  async function handleSendMessage(event) {
    console.log('handleSendMessage triggered');
    event.preventDefault();
    const input = document.getElementById('chatInput');
    const message = input.value.trim();
    console.log('Message input:', message);
    if (!message) {
      console.log('Empty message, exiting');
      return;
    }

    if (!authInitialized) {
      console.error('Authentication not ready. authInitialized:', authInitialized);
      alert('Authentication not ready. Please wait and try again.');
      return;
    }

    if (!(await checkRateLimit())) {
      console.error('Rate limit exceeded');
      alert('Rate limit exceeded. Please wait a minute before trying again.');
      return;
    }

    const messagesContainer = document.getElementById('chatMessages');
    const userMessage = document.createElement('div');
    userMessage.className = 'message user';
    userMessage.innerHTML = `
      <div class="message-content">
        <p>${message}</p>
        <div class="meta">
          <span>${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>
          <div class="actions">
            <button class="copy-message"><i data-lucide="copy" class="h-3 w-3"></i></button>
          </div>
        </div>
      </div>
      <div class="avatar"><i data-lucide="user" class="h-4 w-4"></i></div>
    `;
    messagesContainer.appendChild(userMessage);
    input.value = '';
    console.log('User message appended');

    const loadingSpinner = document.createElement('div');
    loadingSpinner.className = 'loading-spinner';
    loadingSpinner.innerHTML = `
      <div class="dot"></div><div class="dot"></div><div class="dot"></div>
    `;
    messagesContainer.appendChild(loadingSpinner);
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
    console.log('Loading spinner added');

    let answer = '';
    let source = 'None';
    let scores = [];
    const normalizedQuery = normalizeQuery(message);
    console.log('Normalized query:', normalizedQuery);

    try {
      // Try exact cache match first
      const cachedResult = await checkCache(normalizedQuery);
      if (cachedResult) {
        console.log('Using cached result');
        answer = cleanBotAnswer(cachedResult.content);
        source = cachedResult.source;
        scores = cachedResult.scores;
      } else {
        console.log('Fetching from Netlify function');
        const response = await fetch('/.netlify/functions/queryOpenSources', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ query: normalizedQuery, userId })
        });
        console.log('Fetch response status:', response.status);
        if (!response.ok) {
          console.error('Fetch failed with status:', response.status);
          throw new Error(`HTTP error! Status: ${response.status}`);
        }
        const data = await response.json();
        console.log('Fetch response data:', data);
        if (data.error) {
          console.error('Netlify function error:', data.error);
          throw new Error(data.error);
        }
        answer = cleanBotAnswer(data.content || `
          Sorry, I couldnâ€™t find specific information about "${message}".
        `);
        source = data.source || 'GRIT Lab Africa Website';
        scores = data.scores || [];
        await saveToCache(normalizedQuery, answer, source, scores);
      }
    } catch (error) {
      console.error('Error in handleSendMessage:', error.message);
      // Try to find a similar cached query
      const similarResult = await findClosestCachedQuery(normalizedQuery);
      if (similarResult) {
        console.log('Using similar cached result for query:', similarResult.query);
        answer = cleanBotAnswer(similarResult.content);
        source = similarResult.source;
        scores = similarResult.scores;
      } else {
        // Check for keyword matches in fallbackResponses
        let matchedKey = null;
        for (const key in fallbackResponses) {
          if (fallbackResponses[key].keywords.some(keyword => normalizedQuery.includes(keyword))) {
            matchedKey = key;
            break;
          }
        }
        if (matchedKey) {
          console.log('Using fallback response for:', matchedKey);
          answer = cleanBotAnswer(fallbackResponses[matchedKey].response);
          source = fallbackResponses[matchedKey].source;
        } else {
          // Ultimate fallback if no cache or keyword match
          answer = cleanBotAnswer(`Sorry, I couldnâ€™t fetch information due to an error (${error.message}).`);
        }
      }
    }

    // Parse and sanitize answer if not already done
    if (!answer.includes('<p>')) {
      answer = DOMPurify.sanitize(marked.parse(answer));
    }
    await saveConversation(message, answer);

    const botMessage = document.createElement('div');
    botMessage.className = 'message bot';
    botMessage.innerHTML = `
      <div class="avatar"><i data-lucide="bot" class="h-4 w-4"></i></div>
      <div class="message-content">
        ${answer}
        <div class="meta">
          <span>${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>
          <div class="actions">
            <button class="reaction-like" aria-label="Like this message" title="Like"><i data-lucide="thumbs-up" class="h-3 w-3"></i></button>
            <button class="reaction-dislike" aria-label="Dislike this message" title="Dislike"><i data-lucide="thumbs-down" class="h-3 w-3"></i></button>
            <button class="copy-message" aria-label="Copy message" title="Copy"><i data-lucide="copy" class="h-3 w-3"></i></button>
          </div>
        </div>
      </div>
    `;
    messagesContainer.removeChild(loadingSpinner);
    messagesContainer.appendChild(botMessage);
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
    lucide.createIcons();
    console.log('Bot message appended');
  }

  function handleKeyPress(event) {
    console.log('handleKeyPress triggered, key:', event.key);
    if (event.key === 'Enter' && !event.shiftKey) {
      event.preventDefault();
      handleSendMessage(event);
    }
  }

  function setInput(text) {
    console.log('Setting input:', text);
    document.getElementById('chatInput').value = text;
  }

  function copyMessage(content) {
    console.log('Copying message:', content);
    navigator.clipboard.writeText(content.replace(/<[^>]+>/g, '')).then(() => {
      alert('Message copied to clipboard!');
    }).catch(err => {
      console.error('Copy failed:', err);
    });
  }

  function handleReaction(id, reaction) {
    console.log('Handling reaction:', { id, reaction });
    const button = event.target.closest('button');
    if (reaction === 'like') {
      button.style.color = button.style.color === 'rgb(74, 222, 128)' ? '' : '#4ade80';
    } else {
      button.style.color = button.style.color === 'rgb(248, 113, 113)' ? '' : '#f87171';
    }
    alert(reaction === 'like' ? 'Thanks for the feedback!' : 'Feedback received');
  }

  async function updateQuickPrompts() {
    console.log('Updating quick prompts');
    const promptsContainer = document.getElementById('quickPrompts');
    const defaultPrompts = [
      'What is GRIT Lab Africa?',
      'Who founded GRIT Lab Africa?',
      'What programs does GRIT Lab Africa offer?',
      'What skills can I get from GRIT Lab Africa?',
    ];
    const recentPrompts = conversationHistory.slice(-2).map(item => item.query);
    const prompts = [...new Set([...defaultPrompts, ...recentPrompts])].slice(0, 11);
    promptsContainer.innerHTML = prompts.map(p => `<button data-prompt="${p}">${p}</button>`).join('');
    console.log('Quick prompts updated:', prompts);

    document.querySelectorAll('#quickPrompts button').forEach(button => {
      button.addEventListener('click', () => {
        const promptText = button.getAttribute('data-prompt');
        setInput(promptText);
      });
    });
  }

  function initializeEventListeners() {
    const chatForm = document.getElementById('chatForm');
    chatForm.addEventListener('submit', handleSendMessage);

    const chatInput = document.getElementById('chatInput');
    chatInput.addEventListener('keypress', handleKeyPress);

    document.querySelectorAll('.copy-message').forEach(button => {
      button.addEventListener('click', () => {
        const content = button.closest('.message-content').innerHTML;
        copyMessage(content);
      });
    });

    document.querySelectorAll('.reaction-like').forEach(button => {
      button.addEventListener('click', () => handleReaction('temp', 'like'));
    });

    document.querySelectorAll('.reaction-dislike').forEach(button => {
      button.addEventListener('click', () => handleReaction('temp', 'dislike'));
    });

    document.getElementById('toggleButton').addEventListener('click', toggleChatbot);
  }

  initializeEventListeners();
  updateQuickPrompts();
  console.log('Script initialized');
  </script> <!-- End of old Firebase code -->
ut');
    chatInput.addEventListener('keypress', handleKeyPress);

    document.querySelectorAll('.copy-message').forEach(button => {
      button.addEventListener('click', () => {
        const content = button.closest('.message-content').innerHTML;
        copyMessage(content);
      });
    });

    document.querySelectorAll('.reaction-like').forEach(button => {
      button.addEventListener('click', () => handleReaction('temp', 'like'));
    });

    document.querySelectorAll('.reaction-dislike').forEach(button => {
      button.addEventListener('click', () => handleReaction('temp', 'dislike'));
    });

    document.getElementById('toggleButton').addEventListener('click', toggleChatbot);
  }

  initializeEventListeners();
  updateQuickPrompts();
  console.log('Script initialized');
</script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Hero Slideshow
      const heroSlides = document.querySelectorAll('.hero-slide');
      let currentHeroSlide = 0;
      setInterval(() => {
        heroSlides[currentHeroSlide].classList.remove('active');
        currentHeroSlide = (currentHeroSlide + 1) % heroSlides.length;
        heroSlides[currentHeroSlide].classList.add('active');
      }, 5000);

      // Animate on Scroll
      const animateOnScroll = () => {
        const elements = document.querySelectorAll('.why-gla-card, .achievement-card, .trending-card, .video-card, .gallery-item');
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.style.opacity = 1;
              entry.target.style.transform = 'translateY(0)';
            }
          });
        }, { threshold: 0.1 });
        elements.forEach(element => {
          element.style.opacity = 0;
          element.style.transform = 'translateY(20px)';
          element.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
          observer.observe(element);
        });
      };

      // Video Modal
      const initVideoModal = () => {
        const videoBtn = document.querySelector('.watch-video');
        if (!videoBtn) return;
        videoBtn.addEventListener('click', function () {
          const backdrop = document.createElement('div');
          backdrop.className = 'video-backdrop';
          backdrop.style.position = 'fixed';
          backdrop.style.top = '0';
          backdrop.style.left = '0';
          backdrop.style.width = '100%';
          backdrop.style.height = '100%';
          backdrop.style.backgroundColor = 'rgba(0, 0, 0, 0.85)';
          backdrop.style.zIndex = '1000';
          backdrop.style.display = 'flex';
          backdrop.style.alignItems = 'center';
          backdrop.style.justifyContent = 'center';
          backdrop.style.opacity = '0';
          backdrop.style.transition = 'opacity 0.3s ease';
          const videoContainer = document.createElement('div');
          videoContainer.className = 'video-container';
          videoContainer.style.width = '80%';
          videoContainer.style.maxWidth = '900px';
          videoContainer.style.backgroundColor = '#000';
          videoContainer.style.borderRadius = '8px';
          videoContainer.style.boxShadow = '0 10px 30px rgba(0, 0, 0, 0.5)';
          videoContainer.style.transform = 'scale(0.9)';
          videoContainer.style.transition = 'transform 0.3s ease';
          const closeBtn = document.createElement('button');
          closeBtn.className = 'video-close-btn';
          closeBtn.innerHTML = 'Ã—';
          closeBtn.style.position = 'absolute';
          closeBtn.style.top = '10px';
          closeBtn.style.right = '15px';
          closeBtn.style.background = 'none';
          closeBtn.style.border = 'none';
          closeBtn.style.color = '#fff';
          closeBtn.style.fontSize = '24px';
          closeBtn.style.cursor = 'pointer';
          closeBtn.style.zIndex = '1001';
          const videoPlaceholder = document.createElement('div');
          videoPlaceholder.className = 'video-iframe-container';
          videoPlaceholder.style.padding = '56.25% 0 0 0';
          videoPlaceholder.style.position = 'relative';
          videoPlaceholder.style.borderRadius = '8px';
          videoPlaceholder.style.overflow = 'hidden';
          const videoContent = document.createElement('iframe');
          videoContent.className = 'video-iframe';
          videoContent.style.position = 'absolute';
          videoContent.style.top = '0';
          videoContent.style.left = '0';
          videoContent.style.width = '100%';
          videoContent.style.height = '100%';
          videoContent.style.backgroundColor = '#111';
          videoContent.src = 'https://www.youtube.com/embed/mzTZ7lX4yVo?autoplay=1&controls=1&modestbranding=1&rel=0&showinfo=0';
          videoContent.setAttribute('allow', 'autoplay; encrypted-media');
          videoContent.setAttribute('allowfullscreen', '');
          videoContent.setAttribute('frameborder', '0');
          videoPlaceholder.appendChild(videoContent);
          videoContainer.appendChild(videoPlaceholder);
          backdrop.appendChild(closeBtn);
          backdrop.appendChild(videoContainer);
          document.body.appendChild(backdrop);
          document.body.style.overflow = 'hidden';
          setTimeout(() => {
            backdrop.style.opacity = '1';
            videoContainer.style.transform = 'scale(1)';
          }, 10);
          const closeModal = function () {
            videoContent.src = '';
            backdrop.style.opacity = '0';
            videoContainer.style.transform = 'scale(0.9)';
            setTimeout(() => {
              document.body.removeChild(backdrop);
              document.body.style.overflow = '';
            }, 300);
          };
          closeBtn.addEventListener('click', closeModal);
          backdrop.addEventListener('click', function (e) {
            if (e.target === backdrop) closeModal();
          });
          document.addEventListener('keydown', function escClose(e) {
            if (e.key === 'Escape') {
              closeModal();
              document.removeEventListener('keydown', escClose);
            }
          });
        });
      };

      animateOnScroll();
      initVideoModal();
    });
  </script>
</body>
</html>
